Running MDPath-Tools
==============

This page details the methods for postprocessing files generated by **MDPath** using **MDPath-Tools**.

**mdpath_gpcr_image**
==============

For simulations of G-protein coupled receptors (GPCRs), this tool provides a 2D visualization based on genetic numbering. Please ensure stable internet access, as the genetic numbering is computed using GCPRdb.

    -top     Path to the topology file for your analysis.
    -clust   Path to cluster_pathways_dict.pkl, containing main analysis information.
    -cut     Percentage of correlated movements in top paths to consider for plotting.
    -num     (Optional) Path for the output of the genetic numbered PDB file.

Below is an example of a command line input:

.. code-block:: text

    mdpath_gpcr_image -top PATH/topology.pdb -clust PATH/cluster_pathways_dict.pkl -cut 1

For each cluster, a separate picture is generated with the prefix: GPCR_2D_pathways_cluster.


**mdpath_compare**
==============

This function compares different analyses performed on the same or similar topology files. It generates an output that morphs the results of one analysis onto the backbone of another topology file.
.. code-block:: Inputs

    -atop     Path to residue_coordinates.pkl from the analysis to visualize the paths on.
    -bcluster Path to cluster_pathways_dict.pkl from the other analysis, whose paths will be plotted on the topology specified by -atop.
  
Keep in mind that the initial topologies must have the same residue numbering; otherwise, the analysis will fail.
Below is an example of a command line input:



    mdpath_compare -atop PATH/residue_coordinates.pkl -bcluster PATH/cluster_pathways_dict.pkl 

The generated output file, morphed_clusters_paths.json, can now be visualized using the topology file specified for -atop.

**mdpath_multitraj**
==============

This module is useful for comparing multiple trajectories by reclustering the outcomes from all of them.
Below is a quick outline of the inputs:

    -top         Path to the topology file for your analysis.
    -multitraj   Path to all of your top_pathways.pkl files, containing main analysis pathway information.
    -cpu         (Optional) Number of virtual cores to use.
    -closedist   (Optional) Minimal distance between residue heavy atoms to consider them overlapping.

An example input might look like this:

.. code-block:: text

    mdpath_multitraj -top PATH/topology.pdb -multitraj PATH/top_pathways1.pkl PATH/top_pathways2.pkl -cpu 16 

The outputs are prefixed with multitraj and can be handled in the same way as the initial MDPath analysis outputs. Rescaling may be advisable, especially if there is significant overlap between trajectories.

**mdpath_json_editor**
==============
Of the various functions, this one is the most flexible. It requires no additional data computation, only changes in the representation of the data for 3D visualization.

**Recoloring**

This option allows for quick recoloring of paths by parsing a JSON file with the corresponding color format.
When setting up the JSON file, provide a list of colors as normalized RGB values. After calling the function, each cluster will be recolored according to the provided colors.
These are the necessary inputs:

    -json     Path to quick_precomputed_clusters_paths.json or precomputed_clusters_paths.json for which you want to change the color.
    -recolor  Path to your new color palette.json file.

An example input might look like this:

.. code-block:: text

    mdpath_json_editor -recolor PATH/easy_read_colors.json -json PATH/quick_precomputed_clusters_paths.json

The output will have the _recolor_ identifier.
